### scrapy-redis分布式爬虫
解决三个问题
1，爬取队列的共享（redis）
有三种队列模式
先进先出，先进后出，优先级（默认）
2，去重 （redis）
运用redis的set集合去重
3，中断后重新爬取
中断后redis的队列没有清空，再次爬取时，调度器的next_request()会从队列中取到下一个request，继续爬取



### bloomfilt原理
建立一个位数组，将要过滤的数据经过若干个随机的相互独立的散列函数计算，将计算的结果映射到位数组上，对应的位置标记为1，如果所有的结果对应的位数组的位置均为1，该数据在这个集合中，只要有一个不为1则不在。
m > kn
m:位数组长度
k:散列函数
n:集合中的元素个数（有多少数据要去重）

*散列函数的计算方法
遍历value（要计算的数值）利用ord()方法，取到每一位的ASCII码值，然后混合seed进行迭代求和，最终得到一个数值，将数值与位数组进行按位与运算，就可以获得映射结果



### scrapy底层是用的Twisted网络框架
只需要一个主线程，一旦进入等候状态，线程就不会堵塞而是返回一个defer对象，代码继续往下跑，当请求有了响应的时候，刚刚的defer对象得到结果，并触发callback，就会恢复到之前终端的地方继续执行